hike
====
a prototype message board system

files
=====
access.pl
reads the access log from the web server and parses actions submitted by clients.
supported formats are apache and lighttpd.

index.pl
takes the files in html/txt/, log/, and config/ and generates a sqlite database

generate.pl
takes the database generated by index.pl and generates html files in html/

lighttpd.pl
starts an instance of lighttpd using lighttpd.conf, which runs on port 3000

validate.pl
(in the future will) compare the results of index.pl+generate.pl vs gitflow.pl

gitflow.pl
(in the future will) do what index.pl+generate.pl do, but without full rebuild
currently only does some of index.pl's work, and a little bit of generate.pl
requires that you first run "git init" in the html/txt/ directory

installation on GNU platforms
=============================

for devs to check out/play around
=================================
1. install pre-requisites
2. clone repository
3. ./rebuild.sh
4. ./lighttpd.sh
5. ./rebuild.sh as necessary to update the site

for local testing
=================
1. install lighttpd
2. use included lighttpd.conf or run ./lighttpd.pl

for deployment using apache or lighttpd
=======================================
1. symlink log/access.log to wherever your access log lives
2. symlink html root to html/
3. add ./cron.sh to your crontab, set to run as often as you like

requirements
============
* Perl 5.010+
* zip
* gpg
* git
* URI::Encode
* URI::Escape
* HTML::Parser
* Digest::MD5
* Digest::SHA1
* DBI
* SQLite

packages to install on Ubuntu/Debian/etc
========================================
uri-encode-perl
libany-uri-escape-perl
libhtml-parser-perl
libdbd-sqlite3-perl
libdigest-sha-perl
sqlite3
lighttpd
gnupg
gnupg2

packages to install on Redhat/Centos/Fedora
===========================================
perl-Digest-MD5
perl-Digest-SHA
perl-HTML-Parser
perl-DBD-SQLite
perl-URI-Encode
perl-Digest-SHA1
sqlite3
lighttpd
gnupg
gnupg2

known issues
============
sometimes new entries stop being picked up from access.log and/or written to the access log by web server
	the solution is to rm or cycle the access log and restart the web server
	the cause is still unknown to me

this is just a basic prototype, and is not optimized to scale.

all 40-character-long hex-looking strings are assumed to be existing items and are linked in the html-ized posts
	even if they do not exist

the index db is regenerated every time, which can definitely be optimized.

the voter id should (debatable) be generated once per page, but is currently generated once per item.

When an encrypted message has multiple recipients, only the first is used.

terminology
===========
author = anyone with a private key who has posted at least one item
item = a text file with some text in it
tag = a string which can be applied to items as an indicator of its properties
vote = an application of a tag to an item

config
======
config is handled using one file per setting
default/
	provides the defaults as part of the repository
config/
	overrides defaults with local settings
to change a setting, put the file in config/

For list of settings, see doc/config.txt

#todo in the future, config will be updatable by the admin via signed messages

to be continued...
