hike
====
a prototype distributed message board

files
=====
access.pl
reads the access log from the web server and parses actions submitted by clients.
supported formats are apache and lighttpd.

index.pl
takes the files in txt/, log/, and config/ and generates a sqlite database

generate.pl
takes the database generated by index.pl and generates html files in html/

lighttpd.pl
starts an instance of lighttpd using lighttpd.conf, which runs on port 3000

validate.pl
currently doesn't do anything

installation
============

for local testing
=================
1. install lighttpd
2. use included lighttpd.conf or run ./lighttpd.pl

for apache and lighttpd
=======================
1. symlink log/access.log to wherever your access log lives
2. symlink html root to html/
3. symlink html/txt to txt/ *
4. add ./cron.sh to your crontab, set to run as often as you like

* this part is tricky if html/ is itself a symlink

requirements
============
* Perl 5.010+
* zip
* gpg
* git
* URI::Encode
* URI::Escape
* HTML::Parser
* Digest::MD5
* DBD:SQLite

On Debian-derived, apt-get install uri-encode-perl libany-uri-escape-perl libhtml-parser-perl

known issues
============
this is just a basic prototype, and is not optimized to scale.
the index db is regenerated every time, which can definitely be optimized.
the voter id should (debatable) be generated once per page, but is currently generated once per item.

* The html/txt/ symlink has to be created manually

* On Firefox ESR with noscript enabled the iframe doesn't appear, so vote links open in new window/tab

when replying anonymously, footer shows up twice if you leave it in the textarea

* "1 replies" is displayed instead of "1 reply"

* Multiple flags during submission are not parsed correctly
	* This is why the wiki checkbox is disabled for now.

* When an encrypted message has multiple recipients, only the first is used.