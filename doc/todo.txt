Add titles to items
	If title token present, use that
		If not, use first X of title

Make sure links work when pages are viewed locally
	They currently do not, because they're /-prefixed


If homepage is not built by the end of generate.pl,
	do some default action

<bump> button --> "bump"+sign --> submit

re-add write-small to home page
	add lazy-loading of crypto.js
		page needs to work before crypto.js is loaded,
			then buttons are integrated into the page, ideally without reflow

make it easy to switch admin
	remember admin actions as admin actions when admin changes
		alternatively, multiple ad

Current Priorities
==================
Instant updates
	Client-side DOM fill-in
Nicer-looking threading
	Two-level thread nesting
	"Reply" buttons on the item page and the child items
One-click voting buttons
	config for different tags based on existing tags
Generate one page for each thread
	Crawl the thread tree and build a graph


Use shortened hashes to identify posts
	Make checkbox names shorter
	Make HTML files names shorter


Check for, download, and install dependencies
	gpg
	mongoose?
	lighttpd
	perl modules


#todo
# if we need to read from the db, like to generate.pl
# and there is no database, we can fall back on whatever
# version is available



Make it possible to restore from private key without creating new ID first.

Bug: Why does gitflow.pl do a bunch of stuff right after a rebuild?
	Items need to be added to the sub-repo whenever rebuilding

Bug: When there are 0 items, top menu is not populated with avatar

Fix the &replyto= getting appended to the message
	On anon reply messages

Make item IDs shorter
	Prevent collisions

Make JS load more tolerable on slower connections
	* minify the js (and test)
	* https://stackoverflow.com/questions/20014933/progress-of-loading-external-js-file

Define default tags for post types

** Fix the bug with messages by new users not being processed correctly **
	This happens if the message is indexed before the public key

Make the private key form more friendly
	Disable Copy button when there is no text
		Also, if there is a different private key in the clipboard
	Make a Paste button
	Disable the Restore button if there's nothing to restore?
	Make the Restore button automatically paste if there is a private key in the clipboard

Adjust avatars: number of asterisks should reflect
	number of votes/replies/responses the author has attracted
		* anon = 1+
		* anon * = 16+
		** anon * = 128+
		** anon ** = 1024+

Generate client hash in JS for added fingerprinting

Review feed.pl
	Fix rss.txt

Add verification that default/ is consistent with repository
	Warn otherwise (settings should be in config/)

Auto-generate server key if one does not exist
	Store its id in config/server_key_id

changelog should include what's changed between the two versions

Ensure that maincontent tags are present at the right place on all pages
	<main id=maincontent><a name=maincontent></a>

If logged in
	Periodically check for public key on current server
		If doesn't exist, resubmit

SERVER MESSAGE SIGNING
======================
Does server.key exist?
   No:
      generate gen-key-script
      Generate key with gpg --unattended
   Yes:
      Sign message with it
   

FILE TYPE SUPPORT
=================
Files should be eventually uploadable...
	Somehow
		For trusted users

Image support
	embed in html or <img> tag, etc.

Other filetypes that can be supported

latex
pdf
txt
doc
xls
and so on


Set up new domains
Polish the install process
Improve parsing of URLs
Write scripts for instant updates

ACCESSIBILITY FROM LIMITED DEVICES
==================================
1) Add PHP script for instant update triggers
   config/generate_php_hooks
   template/htaccess
   template/submit.php
   template/index.php
2) Submit items via URL without any additional prefix
   * e.g. http://qdb.us/text.goes.here
   * test if spaces work in GTr
3) Set up short URLs to accept input (for live version)
4) Make UI smaller
5) Make links for voting so that form submission not required

Consider changing background color based on time of day?


FEEDBACK FROM L.F.
==================
it might be helpful to have the tags right on the home page, so that it's not landing on a jumble of messages.
2) Submit items via URL without any additional prefix
   * e.g. http://qdb.us/text.goes.here
   * test if spaces work in GTr
3) Set up short URLs to accept input (for live version)
4) Make UI smaller
5) Make links for voting so that form submission not required

Consider changing background color based on time of day?


FEEDBACK FROM L.F.
==================
it might be helpful to have the tags right on the home page, so that it's not landing on a jumble of messages.
Other things can be used to categorize these textboxes and give them more meaning to the user, such as titles, dates, etc.
It might be somewhat counter-intuitive to have the pages going from 14-0 on the top, maybe consider adding a "go back" alongside/instead of these.
Underlining 'publicly and right now' may be confused as a hyperlink, maybe can be left un-underlined. but if you want to emphasize this consider bold or italics
Also, as a personal preference I think the ellipse around the numbers can be removed or made into a rectangle
And consider adding a title/informative header to the page in general, to give more context to what this page is.
   It could be something like "hike.qdb.us" on the very top, a very short description underneath it, and then tabs (home, write, tags, manual) go underneath that



Add to specifications:
   items are always 0-9a-f{40} (lowercase)
   authors are always 0-9A-F{16} (uppercase)
   csrf is always 0-9a-f{32}
   until better specifications are arrived at
   consider an odd-numbered hash of some kind for uniqueness?
      e.g sha1 with one char removed or added or something

Move SQLite db into cache dir

Write
   [x] enable longer text support
      --> js changes form type to post
         --> goes through php receiver
   what are limitations and how to not lose submission??
      maybe issue a backup get just in case?
         only do this if text is long?
            what else?
test mode: remove random characters from scripts when embedding them in page

How to make things easier???
   More flow can be achieved with more one-click actions
   Most common tags should be one-clickable for JS users
      And possibly for non-JS users, just make them links
      Logged in users should vote as themselves by default
         Make sure this is very, very clear, possibly with a second confirmation 
            [ interesting        v ] [ funny ] [ spam ] [ ... ] --> goes to /abcd.html#vote
            | Vote as Anonymous    |
            | Vote without signing |

Somehow handle cleanup of old .html files

Fix Tags page so that correct counts are displayed

Author pages should list all received tags at the top
(sums of all received tags)
interesting (55 [total]) spam (90000)

Add roles directory
    Add roles/admin and roles/moderator
        Add support for having multiple public keys in here as text file



Add client-side handling of HTTP 431 messages when submitting something new


config/require_username
    config/username_mask
        All just client-side js, since we can't control what people do with their own gpg

Function to add file to index and update affected pages

Home page = all tagged posts

Untagged page = all untagged posts
 - make it easier to vote on this one

cookie-based prefs
 - stylesheet
 - hide non-essential ui elements

$fileHash <span class=nonessential>posted by</span> $avatar <span class=nonessential>at</span> 1500000000

Maybe try Perl PGP modules?

No pubkey and/or bad sig should result in big red warning on page/listing

Front-end signature checks/indicators in input boxes

Admin's page should be generated always

site ui elements/forms/areas should be a different color than all the user-entered text content

vote with signature --> write page, but not submitted --> still count as anon vote?

item separator/horizontal bar should be color of item's hash

js fallback for saving via "more options" link on write-small.template


Hide voting, weight-setting, and other messages from home page
   Add an /all page that displays a feed of everything

In reply box, if >> line goes missing, replace it somehow without annoying the user.

When private key is pasted into [restore] textarea,
   automatically check it for presence of private key
      restore if it validates

Make access.pl make a new text file instead of adding to votes.log

Ensure caches are deleted when a vote occurs

Merge vote and reply forms
   With JS, make the checkboxes appear/disappear inside the textbox as addvote/ lines

Add a message that appears the first time someone is posting something, like on HN

[Admin] has assigned a weight of [100] to [ABC]
abc can assign a weight of up to 100 to anyone else?

When listing replies, we can strip the >parenthash part from replies
   while leaving it in the detail view for that comment

Entertaining stats page
   top voter + top tags = top tags by voter
   top voters
   top used tags
      add to profile page
   number of voters
   number of vote records
   busiest days?

Read profile from user submission
   Decide on syntax
   Receive submission
   Replace into /author/abc/profile.html
   Update added_timestamp
      How? It's in added.log

Post profile
   Wording for instructions
   Decide on format
      Prefill Write
      Or
      Dedicated page

Profile page
   Fingerprint:
   Name:
   Creation Date:
   Posts:
   Voted:
   Votes Earned:
   Most Recent Action:

Add "via [sitename]" to pulled and pushed items

Sometimes generated keys have the header/comment field

The Meta refresh seems to be responsible for the scriptless links not turning color

Blank text files still cause problems

NN3 compatibility still needs some work

rebuilding everything twice is a good way of maintaining integrity

move csrf salt to config

forgot to add conversions to user pages

some pages (author pages?) are still in a different func

mod_security can interfere with some signed posts

it would be nice to cut down the posting time from 1-2 minutes to instant.

"create profile" should go to a prefilled textbox with profile template OR to a page to edit profile

Some of the buttons can probably be made full width
   To make them easier to press on mobile

Sometimes on Android the button push is cancelled by the keyboard retract
   Or something like that
      Load page
      Press Write
      Fill in message
      Press the "Post" button
         Expected: Posted
         Actual: First tab is usually ignored

#bug on edge: tag links change colors, but flag links do not



If only one page hide pagination buttons

Fix the vote/tag links
   Js: implement

Set Identity shou1d update the pub1i< key to <orrespond

curl
    add to tree
        add timestamp

Fix add time when .txt uploaded into tree manually
    All .txt
        added_time exists?
            No?
                Current time
                    save

textarea onchange
    begins with header?
        verify with openpgp
            green if valid

Validate signed input on Write page
    textarea onchange
        begins with header?
            verify signature with opengpg
                green if valid


Link target encryption key with parent id key using gpg --list-keys
   This way "Encrypted message for ..." is linked to the correct profile

Feeds list
   OPML
Make gracias.html redirect to next drop from access.pl, which will contain any newly-added posts as a list.
   If there is only one post, automatically redirect to it
   Otherwise, "is this one of your posts?"
   Create IndexLogLine() in index.pl
   Create IndexParentLine() in index.pl

Add GetHashFromFile function
   To do what?

Make updates instant
   Make access.pl write to the index
   Hook calls to generate.pl

Make adding new views easier
Add support for linking sister sites
   Add list of sites in config(?)
   Add page
   List them all on page
   Add menu item for page

Add generation of default values to GetConfig
   Site name
   Site logo


Cookie auth via secret URL per public key, encrypted for that key
Tag hooks for the admin (via cookie auth?)
Tag ratings and enable/disable page
Integrate Perl taint
Use the full fingerprint for avatars for more colors
When writing new html dir, make a list of all existing files, and remove from hash when written to, then delete all others remaining in hash
Add CSRF token to reply form
Remove duplicate parent= footer
Add support for messages with multiple ENC_TOs
   Add loop
   Limit to 5? 10?
   List all of them on details page
Add support for public key included inside signed message
